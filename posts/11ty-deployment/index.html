<!DOCTYPE html><html domain="" lang="en"><head><meta charset="utf-8"><meta content="width=device-width,initial-scale=1" name="viewport"><link href="/img/favicon/favicon-192x192.png?hash=deb870d08f" rel="icon" type="image/png"><meta content="#f9c412" name="theme-color"><meta content="max-snippet:-1, max-image-preview: large, max-video-preview: -1" name="robots"><title>11ty 部落格部署紀錄</title><meta content="11ty 部落格部署紀錄" property="og:title"><meta content="受到 「星巴哥文章推薦」開發全記錄 — 從 Hexo 到 11ty 與 除了 hexo，也可以考慮用 eleventy 來寫技術部落格 - Huli 的啟發，決定動手架一個想了很久但都沒做的個人部落格。 環境 # 透過..." name="description"><meta content="受到 「星巴哥文章推薦」開發全記錄 — 從 Hexo 到 11ty 與 除了 hexo，也可以考慮用 eleventy 來寫技術部落格 - Huli 的啟發，決定動手架一個想了很久但都沒做的個人部落格。 環境 # 透過..." property="og:description"><meta content="summary_large_image" name="twitter:card"><meta content="@" name="twitter:site"><meta content="@" name="twitter:creator"><link href="https://hero19931012.github.io/blog/posts/11ty-deployment/" rel="canonical"><meta content="no-referrer-when-downgrade" name="referrer"><link href="/feed/feed.xml" rel="alternate" type="application/atom+xml" title="Huiming's Blog"><link href="/" rel="preconnect" crossorigin=""><link href="/fonts/Inter-3.19.var.woff2" rel="preload" type="font/woff2" as="font" crossorigin=""><script async="" defer="" src="/js/min.js?hash=8db32dcb3a"></script><script csp-hash="sha256-Ky9qZOPnMhQV/s7Fdb9TYAOfU4KtWNqCZaFK8tSzXa0=">if (/Mac OS X/.test(navigator.userAgent))document.documentElement.classList.add('apple')</script><style>:root{--primary: #f9c412;--primary-dark: #e7bf60;--main-width: calc(100vw - 3em)}main img{content-visibility:auto}article *{scroll-margin-top:50px}header nav{position:fixed;padding:.375em 1.5em;background:rgba(255,255,255,.9);font-weight:200;text-align:right}@media (min-width:37.5em){:root{--main-width: calc(37.5em - 3em)}}dialog{background-color:#8dff80;position:fixed;opacity:.9;z-index:1000}#nav{z-index:2;position:relative}#reading-progress,header nav{z-index:1;width:100vw;left:0;top:0}#reading-progress{background-color:var(--primary);position:absolute;bottom:0;transform:translate(-100vw,0);will-change:transform;pointer-events:none}@font-face{font-display:optional;font-family:"Inter UI";font-weight:100 900;font-style:oblique 0deg 10deg;src:url(/fonts/Inter-3.19.var.woff2) format("woff2")}html{line-height:1.15;-webkit-text-size-adjust:100%;font-family:Inter UI,sans-serif;--font-family: Inter UI, sans-serif}body{margin:0}h1{line-height:1.25;margin:.67em 0 .5em;font-size:24px;line-height:2.4rem;margin-bottom:1.36rem}a{background-color:transparent;color:#f9c412;text-decoration:none;color:var(--primary)}b,strong{font-weight:700}img{border-style:none;max-width:100%;height:auto;margin:0 auto}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}template{display:none}h3{font-size:1.3em;line-height:1.125;margin-bottom:.75em;font-size:1.4rem}h4{font-size:1.2em;margin-bottom:1em;line-height:.9em}body,p,pre{font-size:1em}p,pre{margin-bottom:1.5em}h3,h4{line-height:1.6rem;margin-bottom:1.36rem}h4{font-size:1.2rem}body,p,pre{font-size:1rem;line-height:1.6}p,pre{margin-bottom:1.36rem}@media (min-width:600px){h1{font-size:2.6386rem;line-height:4.4rem}h3{font-size:2.1989rem;line-height:2.64rem}h4{font-size:1.5554rem;line-height:1.76rem}body,p,pre{font-size:1.1rem;line-height:1.6}h1,h3,h4,p,pre{margin-bottom:1.496rem}}@media (min-width:1200px){h1{font-size:3.6453rem;line-height:6.72rem}h3{font-size:1.62rem;line-height:2.88rem}h4{font-size:1.4rem;line-height:1.15rem}body,p,pre{font-size:1.2rem;line-height:1.6}h1,h3,h4,p,pre{margin-bottom:1.632rem}}code,pre{overflow-x:auto}pre{font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace}pre code:not([class]){padding:1.5em;overflow-x:scroll}code{border-radius:.3em;color:#e2777a;padding:0 .3em;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:90%;background:#2d2d2d}a:hover{text-decoration:underline}@media (max-width:767px){x:-moz-any-link{display:table-cell}}*{border:0;box-sizing:border-box}body,h1,h3,h4,header nav a{font-family:var(--font-family)}body{background:#181818;color:#eee}header{padding:4.5em 1.5em 3em;width:60.5em;margin:0 auto;text-align:center;max-width:100%;display:flex;align-items:center;flex-direction:column}header p{margin-top:0}header nav h1{float:left;font-size:inherit;line-height:inherit;margin:0;text-align:left}header nav a{font-weight:700;text-decoration:none;color:#181818;margin-left:1.5em}header nav a:first-of-type{margin-left:auto}header nav a:last-of-type{margin-right:1.5em}main{max-width:70rem;margin:0 auto;border-top:.5px solid #ccc}footer{background:rgba(0,0,0,.8);color:#fff;padding:.5em;font-size:14px;text-align:center}footer>*{margin:1.5em}footer nav a img{vertical-align:middle}footer nav,footer p{font-size:90%}article{max-width:100%;padding:1.5em;margin:0 auto}blockquote{border-left:1px solid #f9c412;padding:0 1.5em;margin:1.5em 0 1.5em 1.5em;border-left:1px solid var(--primary)}blockquote footer{background:0 0;display:block;color:#ccc;padding:.75em 0;font-size:90%;text-align:start}code[class*=language-],pre[class*=language-]{color:#ccc;background:0 0;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]{padding:0}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.comment{color:#999}.token.punctuation{color:#ccc}.token.function,.token.number{color:#f08d49}.token.property{color:#f8c555}.token.atrule{color:#cc99cd}.token.string,.token.variable{color:#7ec699}.token.operator,.token.url{color:#67cdcc}.token.inserted{color:green}</style></head><body><header><nav><div id="nav"><h1><a href="/" title="Homepage">Huiming's Blog</a></h1><a href="/about/">About</a></div><div id="reading-progress" aria-hidden="true"></div></nav><h1>11ty 部落格部署紀錄</h1><aside>3 min read.</aside><dialog id="message"></dialog></header><main><article><p>受到 <a href="https://pse.is/3vf88q">「星巴哥文章推薦」開發全記錄 — 從 Hexo 到 11ty</a> 與 <a href="https://pse.is/3uztdr">除了 hexo，也可以考慮用 eleventy 來寫技術部落格 - Huli</a> 的啟發，決定動手架一個想了很久但都沒做的個人部落格。</p><h3 id="%E7%92%B0%E5%A2%83">環境 <a href="#%E7%92%B0%E5%A2%83" class="direct-link">#</a></h3><p>透過 <a href="https://github.com/google/eleventy-high-performance-blog">google/eleventy-high-performance-blog</a> 產生靜態網站，部署在 GitHub Pages 上。</p><h3 id="%E6%AD%A5%E9%A9%9F">步驟 <a href="#%E6%AD%A5%E9%A9%9F" class="direct-link">#</a></h3><h4 id="1.-%E5%BB%BA%E7%AB%8B-repository">1. 建立 repository <a href="#1.-%E5%BB%BA%E7%AB%8B-repository" class="direct-link">#</a></h4><p>用 <a href="https://github.com/google/eleventy-high-performance-blog">high performance blog template</a> 當作 template 製作一個自己的 repo，然後 clone 到 local</p><h4 id="2.-%E8%A8%AD%E5%AE%9A-github-actions">2. 設定 GitHub Actions <a href="#2.-%E8%A8%AD%E5%AE%9A-github-actions" class="direct-link">#</a></h4><p>參考 <a href="https://www.linkedin.com/pulse/eleventy-github-pages-lea-tortay/">Eleventy and Github pages</a> 設定 repo 在 commit 之後要執行的 actions。在編輯器中打開 <code>.github/workflows/build-and-test.yaml</code>，加入一個 deploy 的 step:</p><pre class="language-yaml"><code class="language-yaml"><span class="token comment"># Runs build and test</span><br><span class="token atrule key">name</span><span class="token punctuation">:</span> CI<br><br><span class="token atrule key">on</span><span class="token punctuation">:</span><br>  <span class="token atrule key">push</span><span class="token punctuation">:</span><br>	 <span class="token atrule key">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span><br>  <span class="token atrule key">pull_request</span><span class="token punctuation">:</span><br>	 <span class="token atrule key">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span><br><br><span class="token atrule key">jobs</span><span class="token punctuation">:</span><br>  <span class="token atrule key">build</span><span class="token punctuation">:</span><br>	 <span class="token atrule key">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest<br><br>	 <span class="token atrule key">strategy</span><span class="token punctuation">:</span><br>		<span class="token atrule key">matrix</span><span class="token punctuation">:</span><br>		  <span class="token atrule key">node-version</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>12.x<span class="token punctuation">,</span> 14.x<span class="token punctuation">]</span><br><br>	 <span class="token atrule key">steps</span><span class="token punctuation">:</span><br>		<span class="token punctuation">-</span> <span class="token atrule key">uses</span><span class="token punctuation">:</span> actions/checkout@v2<br>		<span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> Use Node.js $matrix.node<span class="token punctuation">-</span>version<br>		  <span class="token atrule key">uses</span><span class="token punctuation">:</span> actions/setup<span class="token punctuation">-</span>node@v1<br>		  <span class="token atrule key">with</span><span class="token punctuation">:</span><br>			 <span class="token atrule key">node-version</span><span class="token punctuation">:</span> $matrix.node<span class="token punctuation">-</span>version<br>		<span class="token punctuation">-</span> <span class="token atrule key">run</span><span class="token punctuation">:</span> npm install<br>		<span class="token punctuation">-</span> <span class="token atrule key">run</span><span class="token punctuation">:</span> npm run build<span class="token punctuation">-</span>ci<br><br>		<span class="token comment"># 加入下面部署的 action</span><br>		<span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> Deploy<br>		  <span class="token atrule key">uses</span><span class="token punctuation">:</span> peaceiris/actions<span class="token punctuation">-</span>gh<span class="token punctuation">-</span>pages@v3<br>		  <span class="token atrule key">with</span><span class="token punctuation">:</span><br>			 <span class="token atrule key">deploy_key</span><span class="token punctuation">:</span> $secrets.ACTIONS_DEPLOY_KEY<br>			 <span class="token atrule key">publish_dir</span><span class="token punctuation">:</span> ./_site</code></pre><p><code>secrets.ACTIONS_DEPLOY_KEY</code> 待會會在 GitHub 上面設定。</p><h4 id="3.-%E8%A8%AD%E5%AE%9A%E5%85%A8%E5%9F%9F-path-prefix">3. 設定全域 path prefix <a href="#3.-%E8%A8%AD%E5%AE%9A%E5%85%A8%E5%9F%9F-path-prefix" class="direct-link">#</a></h4><p>在 GitHub Pages 上部署，會有一個屬於自己的 domain <code>username.github.io</code>，gh-pages 透過增加一層 subdomain 來區分不同的 repo，如果要訪問一個路徑 <code>path</code>，必須用 <code>username.github.io/repo-name/path</code>，才能正確存取，因此需要將專案裡所有的 link 加上一個 prefix。</p><p>打開 <code>.eleventy.js</code>，找到最下面 return 的部分，可以看到 subdirectory 的說明，把原本被註解的 <code>pathPrefix: "/"</code> 取消註解，改成 repo name 就可以了。</p><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// If your site lives in a different subdirectory, change this.</span><br><span class="token comment">// Leading or trailing slashes are all normalized away, so don’t worry about those.</span><br><br><span class="token comment">// If you don’t have a subdirectory, use "" or "/" (they do the same thing)</span><br><span class="token comment">// This is only used for link URLs (it does not affect your file structure)</span><br><span class="token comment">// Best paired with the `url` filter: https://www.11ty.io/docs/filters/url/</span><br><br><span class="token comment">// You can also pass this in on the command line using `--pathprefix`</span><br>pathPrefix<span class="token operator">:</span> <span class="token string">"/repo-name"</span></code></pre><h4 id="4.-%E7%94%A2%E7%94%9F%E8%88%87%E8%A8%AD%E5%AE%9A-deploy-key">4. 產生與設定 Deploy key <a href="#4.-%E7%94%A2%E7%94%9F%E8%88%87%E8%A8%AD%E5%AE%9A-deploy-key" class="direct-link">#</a></h4><p>終端機中用下面的指令產生 2 支檔案：<strong>gh-pages.pub</strong> (public key) 和 <strong>gh-pages</strong> (private key)</p><pre class="language-bash"><code class="language-bash">ssh-keygen -t rsa -b <span class="token number">4096</span> -C <span class="token string">"<span class="token variable"><span class="token variable">$(</span><span class="token function">git</span> config user.email<span class="token variable">)</span></span>"</span> -f gh-pages -N <span class="token string">""</span></code></pre><p>進入 repo Settings 頁面</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/settings-tab-1920w.avif 1920w, /img/11ty-deployment/settings-tab-1280w.avif 1280w, /img/11ty-deployment/settings-tab-640w.avif 640w, /img/11ty-deployment/settings-tab-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/settings-tab-1920w.webp 1920w, /img/11ty-deployment/settings-tab-1280w.webp 1280w, /img/11ty-deployment/settings-tab-640w.webp 640w, /img/11ty-deployment/settings-tab-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/settings-tab-1920w.png 1920w, /img/11ty-deployment/settings-tab-1280w.png 1280w, /img/11ty-deployment/settings-tab-640w.png 640w, /img/11ty-deployment/settings-tab-320w.png 320w" type="image/png"><img alt="settings-tab" decoding="async" height="222" loading="lazy" src="/img/11ty-deployment/settings-tab-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2682 222'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAACCAYAAACpDacGAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAiElEQVQImT2O2w7DMAhD+76pXS6E0DShbf7/G72Bpj4gkLF8vGxJIH3Cdq6KWA5saQe3G9wurLG6nutwTz0mAjX3mfbJ5r18PEMURRSaCu4xofWAhIxXYCxEO06dyBbAHbF0B5DoA0vcPdjusp8OM4gB1yQgOf9/KzxAdaDHgqsplBs4EN4/2BcK/0TFPJMrCwAAAABJRU5ErkJggg=='%3E%3C/image%3E%3C/svg%3E&quot;)" width="2682"></picture></p><p>選擇 Security &gt; Deploy Keys &gt; Add deploy key</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-key-1920w.avif 1920w, /img/11ty-deployment/deploy-key-1280w.avif 1280w, /img/11ty-deployment/deploy-key-640w.avif 640w, /img/11ty-deployment/deploy-key-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-key-1920w.webp 1920w, /img/11ty-deployment/deploy-key-1280w.webp 1280w, /img/11ty-deployment/deploy-key-640w.webp 640w, /img/11ty-deployment/deploy-key-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-key-1920w.png 1920w, /img/11ty-deployment/deploy-key-1280w.png 1280w, /img/11ty-deployment/deploy-key-640w.png 640w, /img/11ty-deployment/deploy-key-320w.png 320w" type="image/png"><img alt="deploy-key" decoding="async" height="1320" loading="lazy" src="/img/11ty-deployment/deploy-key-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2272 1320'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAaUlEQVQImW2N2w6AIAxD9+6NiQwBJRrj/39iDSQaRR5OlnVdS/04o1UCCTu0XdGx/eDjCTV5kPg9G9kGmLBBuxVswmNk7fIklgXNYPKSHsrEpCVommP1cHPr5OIBZfwvqSQnvqtr9cl4ARUISTuELB4wAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)" width="2272"></picture></p><p>填入 title 與 key (複製 gh-pages.pub 的內容)，然後勾選 <code>Allow write access</code>，允許修改權限</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/add-deploy-key-1920w.avif 1920w, /img/11ty-deployment/add-deploy-key-1280w.avif 1280w, /img/11ty-deployment/add-deploy-key-640w.avif 640w, /img/11ty-deployment/add-deploy-key-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/add-deploy-key-1920w.webp 1920w, /img/11ty-deployment/add-deploy-key-1280w.webp 1280w, /img/11ty-deployment/add-deploy-key-640w.webp 640w, /img/11ty-deployment/add-deploy-key-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/add-deploy-key-1920w.png 1920w, /img/11ty-deployment/add-deploy-key-1280w.png 1280w, /img/11ty-deployment/add-deploy-key-640w.png 640w, /img/11ty-deployment/add-deploy-key-320w.png 320w" type="image/png"><img alt="add-deploy-key" decoding="async" height="1108" loading="lazy" src="/img/11ty-deployment/add-deploy-key-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1702 1108'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAiklEQVQImVXP2wrCMAwG4ChzPdCu6bpTpyDF4rXv/3K/tFXYLj5I4A9JyMcXxj1jvSdYv8K4GYaXWh+RCxHahmaYKuPOwTJIJSA0Q2qGUA5S+9rfhEVX9AbKBlDXWxD1oKsEXURT6gNlRtCWMubHE5bbir96xu+kujp+MpZ3wuAjeN7BUzOM2+mZL4lfRoyP8bQHAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)" width="1702"></picture></p><p>接著到 Security &gt; Secrets &gt; Actions，點選 New repository secret，將 Name 填入 ACTIONS_DEPLOY_KEY，key 則複製 gh-pages 的內容貼上</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/add-secret-1920w.avif 1920w, /img/11ty-deployment/add-secret-1280w.avif 1280w, /img/11ty-deployment/add-secret-640w.avif 640w, /img/11ty-deployment/add-secret-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/add-secret-1920w.webp 1920w, /img/11ty-deployment/add-secret-1280w.webp 1280w, /img/11ty-deployment/add-secret-640w.webp 640w, /img/11ty-deployment/add-secret-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/add-secret-1920w.png 1920w, /img/11ty-deployment/add-secret-1280w.png 1280w, /img/11ty-deployment/add-secret-640w.png 640w, /img/11ty-deployment/add-secret-320w.png 320w" type="image/png"><img alt="add-secret" decoding="async" height="1038" loading="lazy" src="/img/11ty-deployment/add-secret-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 1680 1038'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAe0lEQVQImW3P2wqDMBAE0G1R18TNzaQxLRZ7of3/PxxBeoPm4TDMwj4MhXJDOD4wzXfk0wXiJ5jwj2JZ4NIMO5btoG2C+Pzp5pUk7gBWDt0P1v5Lue2ZmlZAxKB9X7dj8BBAykd0g0XLpqphA20iKD0XjNczxObqiPeYFZimRbc2dNefAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)" width="1680"></picture></p><h4 id="5.-commit-%E4%B8%A6%E6%8E%A8%E4%B8%8A-github">5. Commit 並推上 GitHub <a href="#5.-commit-%E4%B8%A6%E6%8E%A8%E4%B8%8A-github" class="direct-link">#</a></h4><p>回到本機，先把剛剛的修改 commit，然後 git push 上 Github</p><h4 id="6.-%E7%A2%BA%E8%AA%8D-action-%E6%9C%89%E6%AD%A3%E5%B8%B8%E5%9F%B7%E8%A1%8C">6. 確認 Action 有正常執行 <a href="#6.-%E7%A2%BA%E8%AA%8D-action-%E6%9C%89%E6%AD%A3%E5%B8%B8%E5%9F%B7%E8%A1%8C" class="direct-link">#</a></h4><p>檢查 repo Actions 頁面，可以看到所有正在執行或之前已經跑好的 workflows，並會根據 commit 來命名，這邊會看到 2 個分別是 CI 與 CodeQL 的 workflow，是 eleventy-high-performance-blog 內建的</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/default-actions-1920w.avif 1920w, /img/11ty-deployment/default-actions-1280w.avif 1280w, /img/11ty-deployment/default-actions-640w.avif 640w, /img/11ty-deployment/default-actions-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/default-actions-1920w.webp 1920w, /img/11ty-deployment/default-actions-1280w.webp 1280w, /img/11ty-deployment/default-actions-640w.webp 640w, /img/11ty-deployment/default-actions-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/default-actions-1920w.png 1920w, /img/11ty-deployment/default-actions-1280w.png 1280w, /img/11ty-deployment/default-actions-640w.png 640w, /img/11ty-deployment/default-actions-320w.png 320w" type="image/png"><img alt="default-actions" decoding="async" height="376" loading="lazy" src="/img/11ty-deployment/default-actions-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2346 376'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAADCAYAAABxhjRXAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAh0lEQVQImWXOawqDMBAEYA9QTYzmna2JkRro4/63m+JSROiPgWUYPrZTRCj7C3l7wqYVYvIQc4DUEYNyuEmDXnlIV9GP9szRjybBxgI5B+660UdQbUh5h4mFB4pDGCb/wxyEWf4xHWFC5gcYU4mwtjdq+yDlB0PaLzxk6PrZcV8wZQnhvp3YF0aCR+q2tGBhAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)" width="2346"></picture></p><p>這 2 個跑好後會出現第 3 個名為 pages-build-deployment 的 workflow，是將網站部署到 gh-pages 的 workflow</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-action-1920w.avif 1920w, /img/11ty-deployment/deploy-action-1280w.avif 1280w, /img/11ty-deployment/deploy-action-640w.avif 640w, /img/11ty-deployment/deploy-action-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-action-1920w.webp 1920w, /img/11ty-deployment/deploy-action-1280w.webp 1280w, /img/11ty-deployment/deploy-action-640w.webp 640w, /img/11ty-deployment/deploy-action-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-action-1920w.png 1920w, /img/11ty-deployment/deploy-action-1280w.png 1280w, /img/11ty-deployment/deploy-action-640w.png 640w, /img/11ty-deployment/deploy-action-320w.png 320w" type="image/png"><img alt="deploy-action" decoding="async" height="220" loading="lazy" src="/img/11ty-deployment/deploy-action-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2388 220'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAACCAYAAABGz8w4AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAe0lEQVQImYWOWw6DIBBFXUCh5SEOihAEq9b0Efe/t2ug/+3Hydw5mWRuo5JH3J+Ytw/S+kLe3lj2o2bROjBB4MqCS/oLk4SrsrA+Q1OAaIfqi2u4JozTipAeCPnLGBcM4Y7OTTB9hDQOl5sBE12dvyg3fZihydeCZS/PTodtQpFaspSNAAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)" width="2388"></picture></p><p>點進去可以看 log 了解現在在什麼階段，完成後在 deploy 的區塊下會有部署完的網址，沒意外是 <code>https://username.github.io/repo-name</code></p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-action-detail-1920w.avif 1920w, /img/11ty-deployment/deploy-action-detail-1280w.avif 1280w, /img/11ty-deployment/deploy-action-detail-640w.avif 640w, /img/11ty-deployment/deploy-action-detail-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-action-detail-1920w.webp 1920w, /img/11ty-deployment/deploy-action-detail-1280w.webp 1280w, /img/11ty-deployment/deploy-action-detail-640w.webp 640w, /img/11ty-deployment/deploy-action-detail-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-action-detail-1920w.png 1920w, /img/11ty-deployment/deploy-action-detail-1280w.png 1280w, /img/11ty-deployment/deploy-action-detail-640w.png 640w, /img/11ty-deployment/deploy-action-detail-320w.png 320w" type="image/png"><img alt="deploy-action-detail" decoding="async" height="1364" loading="lazy" src="/img/11ty-deployment/deploy-action-detail-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2424 1364'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAGCAYAAAD68A/GAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAoklEQVQImT2O2w6DIBBEae1NURABFbA1bZP+/x+eZmnSh01mJ2cyo8rrQ9k/rNuLpTyJaWcMGeszZlpxcWO9v1FuLmg7V3PJT1zI9DaiTaAznnbw3LRD2ZDox5nBzVif0EPg1juMT3RD4HjqODQt6gctaBtr8tqNtL3HLTtmyjRnzaW1KIEEll1hfVQtIW1DrZdfZv1BqRVQTPHGWDBTqlruC+oLSJCHo1z4AAAAAElFTkSuQmCC'%3E%3C/image%3E%3C/svg%3E&quot;)" width="2424"></picture></p><h4 id="7.-%E9%83%A8%E7%BD%B2%E5%AE%8C%E6%88%90">7. 部署完成 <a href="#7.-%E9%83%A8%E7%BD%B2%E5%AE%8C%E6%88%90" class="direct-link">#</a></h4><p>網址列輸入該網址，沒出現 404 而是以下畫面的話就是部署成功了</p><p><picture><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-success-1920w.avif 1920w, /img/11ty-deployment/deploy-success-1280w.avif 1280w, /img/11ty-deployment/deploy-success-640w.avif 640w, /img/11ty-deployment/deploy-success-320w.avif 320w" type="image/avif"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-success-1920w.webp 1920w, /img/11ty-deployment/deploy-success-1280w.webp 1280w, /img/11ty-deployment/deploy-success-640w.webp 640w, /img/11ty-deployment/deploy-success-320w.webp 320w" type="image/webp"><source sizes="(max-width: 608px) 100vw, 608px" srcset="/img/11ty-deployment/deploy-success-1920w.png 1920w, /img/11ty-deployment/deploy-success-1280w.png 1280w, /img/11ty-deployment/deploy-success-640w.png 640w, /img/11ty-deployment/deploy-success-320w.png 320w" type="image/png"><img alt="deploy-success" decoding="async" height="2174" loading="lazy" src="/img/11ty-deployment/deploy-success-1920w.png" style="background-size:cover;background-image:url(&quot;data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http%3A//www.w3.org/2000/svg' xmlns%3Axlink='http%3A//www.w3.org/1999/xlink' viewBox='0 0 2926 2174'%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='.5'%3E%3C/feGaussianBlur%3E%3CfeComponentTransfer%3E%3CfeFuncA type='discrete' tableValues='1 1'%3E%3C/feFuncA%3E%3C/feComponentTransfer%3E%3C/filter%3E%3Cimage filter='url(%23b)' preserveAspectRatio='none' height='100%25' width='100%25' xlink%3Ahref='data%3Aimage/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAHCAYAAADam2dgAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAtklEQVQYlV3M3U4CMRCG4R5toygLarc7bTcQSAQCGEDgXvhZdTfI/d/Ba9qoBxw8mcmXb0Yd6obTR8tne+X8daFuvjnWLYdzk2bMVL+X04vynG73kdl0wttywX6/Y7NeYcwLSkSInHOIRMJ8vmC73TEYDPE+oMqy5I9zwmg0xnuP2GeCtyn/L1lr06f3zZLpZEwIHpHfUlEURNbGaRmGJ2avFaGqMMakY6W15tb9neahk6U9yzQ/hO1YXTcUqpEAAAAASUVORK5CYII='%3E%3C/image%3E%3C/svg%3E&quot;)" width="2926"></picture></p><h3 id="%E5%BE%8C%E8%A8%98">後記 <a href="#%E5%BE%8C%E8%A8%98" class="direct-link">#</a></h3><p>這篇記錄只提到如何透過 GitHub Pages 搭配 GitHub Actions 來部署 11ty 網站，沒提到設計與客製頁面的開發是由於我只想先快速簡單弄一個可以放筆記的平台，所以目前都還沒客製自己的頁面，之後有需要會慢慢新增。</p><p>然後部署在 GitHub Pages 上有一個已知但不知道如何解決的問題，就是圖片在 markdown 裡面沒辦法套用 path prefix 的設定，也就會抓不到圖，猜測如果有買 domain 應該就可以解決這個問題，但我沒有 domain，所以目前只能 workaround，就是利用 11ty 的 markdown 會先經過 liquid template engine 編譯的設定，直接在 markdown 的圖片路徑上使用 filter，寫起來如下 (不含 backslash)：</p><pre class="language-md"><code class="language-md">![demo](\{\{ '/img/first-post/abc.png' | url \}\})</code></pre><p>缺點就是不太好看，也沒辦法 preview (還是可以用 npm run watch 在瀏覽器裡 preview 啦)，我研究了一整天，想要找到能夠對 markdown 裡面的 img 路徑加上 prefix 的方法，但是沒找到，甚至還想說自己寫個 markdown-it 的 plugin 好了，後來覺得太麻煩作罷，就先接受這樣子了。</p><blockquote><p><em>2022/4/10 更新，我後來還是買了域名，所以就可以照正常方式使用，不需透過 liquid 預先編輯。</em></p></blockquote><p>以上就是粗略的 11ty 部落格架設記錄。</p><h3 id="references">References <a href="#references" class="direct-link">#</a></h3><p><a href="https://www.linkedin.com/pulse/eleventy-github-pages-lea-tortay/">Eleventy and Github pages | LinkedIn</a></p><p><a href="https://www.rockyourcode.com/how-to-deploy-eleventy-to-github-pages-with-github-actions/">How to Deploy Eleventy to GitHub Pages With GitHub Actions | rockyourcode</a></p><p><a href="https://github.com/google/eleventy-high-performance-blog">google/eleventy-high-performance-blog: A high performance blog template for the 11ty static site generator. (github.com)</a></p><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"11ty 部落格部署紀錄","image":["https://hero19931012.github.io/blog/img/11ty-deployment/settings-tab-1920w.png","https://hero19931012.github.io/blog/img/11ty-deployment/deploy-key-1920w.png","https://hero19931012.github.io/blog/img/11ty-deployment/add-deploy-key-1920w.png","https://hero19931012.github.io/blog/img/11ty-deployment/add-secret-1920w.png","https://hero19931012.github.io/blog/img/11ty-deployment/default-actions-1920w.png","https://hero19931012.github.io/blog/img/11ty-deployment/deploy-action-1920w.png","https://hero19931012.github.io/blog/img/11ty-deployment/deploy-action-detail-1920w.png","https://hero19931012.github.io/blog/img/11ty-deployment/deploy-success-1920w.png"],"author":"Huiming","genre":"","publisher":{"@type":"Organization","name":"Publisher name. Update me.","logo":{"@type":"ImageObject","url":"/img/favicon/favicon-192x192.png?hash=deb870d08f"}},"url":"https://hero19931012.github.io/blog/posts/11ty-deployment/","mainEntityOfPage":"https://hero19931012.github.io/blog/posts/11ty-deployment/","datePublished":"2022-02-20","dateModified":"2022-07-26","description":"受到 「星巴哥文章推薦」開發全記錄 — 從 Hexo 到 11ty 與 除了 hexo，也可以考慮用 eleventy 來寫技術部落格 - Huli 的啟發，決定動手架一個想了很久但都沒做的個人部落格。 環境 # 透過..."}</script><p>Published <time datetime="2022-02-20">20 Feb 2022</time></p></article></main><footer><a href="/about/">© 2021 ♥️ Huiming</a><br><span>Powered By <a href="https://github.com/google/eleventy-high-performance-blog">eleventy-high-performance-blog</a></span></footer></body></html>